<div class="d-flex justify-content-between">
    <ds-search-export-csv *ngIf="showCsvExport" [searchConfig]="searchConfig"></ds-search-export-csv>
</div>
<div *ngIf="searchResults && searchResults?.hasSucceeded && !searchResults?.isLoading && searchResults?.payload?.page.length > 0" @fadeIn>
    <ds-alert *ngIf="showSearchResultNotice" [type]="searchResultNoticeType" [content]="searchResultNotice"></ds-alert>

    <!-- SORT RESULT ====================================================== -->
    <div class="input-group my-2">
        <div class="input-group-prepend">
            <div class="input-group-text">
                <i class="fa fa-sort-amount-{{ searchConfig.sort.direction === SortDirection.ASC ? 'up' : 'down' }}"></i>
            </div>
        </div>
        <select *ngIf="(sortOptionsList$ | async) as sortOptionsList"
                [id]="'search-sort'"
                class="form-control"
                [ngbTooltip]="'search.sidebar.settings.sort-by' | translate"
                (change)="reloadOrder($event)">
            <option *ngFor="let sortOption of sortOptionsList"
                    [value]="sortOption.field + ',' + sortOption.direction.toString()"
                    [selected]="isOptionSelected(sortOption) ? 'selected': null">
                {{'sorting.' + sortOption.field + '.' + sortOption.direction | translate}}
            </option>
        </select>
    </div>
    <!-- SEARCH RESULTS =================================================== -->
    <ds-viewable-collection
            [config]="searchConfig.pagination"
            [sortConfig]="searchConfig.sort"
            [objects]="searchResults"
            [hideGear]="true"
            [selectable]="selectable"
            [selectionConfig]="selectionConfig"
            [linkType]="linkType"
            [context]="context"
            [hidePaginationDetail]="hidePaginationDetail"
            [showThumbnails]="showThumbnails"
            [customData]="customData"
            (contentChange)="contentChange.emit($event)"
            (customEvent)="emitCustomEvent($event)"
            (deselectObject)="deselectObject.emit($event)"
            (selectObject)="selectObject.emit($event)">
    </ds-viewable-collection>
</div>
<ds-themed-loading *ngIf="isLoading()" message="{{'loading.search-results' | translate}}"></ds-themed-loading>
<ds-error *ngIf="showError()" message="{{errorMessageLabel() | translate}}"></ds-error>
<div *ngIf="searchResults?.payload?.page.length == 0 || searchResults?.statusCode == 400">
    {{ 'search.results.no-results' | translate }}
    <a [routerLink]="['/search']"
       [queryParams]="{ query: surroundStringWithQuotes(searchConfig?.query) }"
       queryParamsHandling="merge">
        {{"search.results.no-results-link" | translate}}
    </a>
</div>
